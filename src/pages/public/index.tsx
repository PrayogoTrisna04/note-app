import { useEffect, useState } from "react";import Navbar from "@/components/Navbar";import Link from "next/link";export default function PublicNotesPage(){const [notes,setNotes]=useState<any[]>([]);const [query,setQuery]=useState("");const [page,setPage]=useState(1);const [totalPages,setTotalPages]=useState(1);const fetchNotes=async(search="",pageNum=1)=>{const res=await fetch(`/api/public-notes?q=${encodeURIComponent(search)}&page=${pageNum}&limit=5`);const data=await res.json();setNotes(data.notes);setPage(data.page);setTotalPages(data.totalPages);};useEffect(()=>{fetchNotes();},[]);const handleSearch=(e:any)=>{e.preventDefault();fetchNotes(query,1);};return(<><Navbar/><div className="max-w-3xl mx-auto mt-6 p-4"><h1 className="text-2xl font-bold mb-4">Public Notes</h1><form onSubmit={handleSearch} className="flex mb-4"><input className="flex-1 border p-2 rounded-l" placeholder="Search notes..." value={query} onChange={e=>setQuery(e.target.value)}/><button className="bg-blue-600 text-white px-4 rounded-r">Search</button></form><div className="space-y-4">{notes.map((note:any)=>(<div key={note.id} className="border p-4 rounded bg-white shadow-sm"><h2 className="font-semibold text-lg">{note.title}</h2><p className="text-gray-700">{(note.contentMd||"").slice(0,150)}...</p><p className="text-xs text-gray-500 mt-1">By: {note.owner?.name || "Anonymous"}</p><Link href={`/notes/${note.id}`} className="inline-block mt-2">Read more</Link></div>))}</div><div className="flex justify-center gap-2 mt-4">{Array.from({length:totalPages},(_,i)=>(<button key={i} onClick={()=>fetchNotes(query,i+1)} className={`px-3 py-1 border rounded ${i+1===page?"bg-blue-600 text-white":"bg-white"}`}>{i+1}</button>))}</div></div></>);}